<template>
    <div>
        <div v-for="(item,index) in stories" :key="index">
            <div>名字：{{item.title}}</div>
            <div>描述：{{item.ga_prefix}}</div>
            <div>图片：<img :src="getImage(item.images)" :alt="item.title"></div>
        </div>
    </div>
</template>
<script>
import axios from 'axios'
export default {
  data () {
    return {
      stories: {}
    }
  },
  created () {
    this.getHero()
  },
  methods: {
    getHero () {
      axios.get('/api/news/latest')
      .then(res => {
        this.stories = res.data.stories
      })
    },
    getImage (url) {
      console.log(url)
      if (url !== undefined) {
        return url[0].replace(/http\w{0,1}:\/\/p/g, 'https://images.weserv.nl/?url=p')
      }
    }
  }
}
</script>
